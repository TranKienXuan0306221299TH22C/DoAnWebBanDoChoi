@{
    ViewData["Title"] = "Chọn Tỉnh Huyện Xã";
}
<style>
    .dropdown-select-container {
        text-align: center;
    }

    .dropdown-select {
        display: inline-block;
        width: 25%;
        padding: 5px;
        margin: 5px 2%;
        border: solid 1px #686868;
        border-radius: 5px;
    }
</style>

<div class="dropdown-select-container">
    <select class="dropdown-select" id="tinh" name="tinh" title="Chọn Tỉnh Thành">
        <option value="0">Tỉnh Thành</option>
    </select>
    <select class="dropdown-select" id="quan" name="quan" title="Chọn Quận Huyện">
        <option value="0">Quận Huyện</option>
    </select>
    <select class="dropdown-select" id="phuong" name="phuong" title="Chọn Phường Xã">
        <option value="0">Phường Xã</option>
    </select>
</div>


@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Load tỉnh thành
            $.getJSON('https://esgoo.net/api-tinhthanh/1/0.htm', function(data_tinh) {
                if (data_tinh.error == 0) {
                    $.each(data_tinh.data, function (key_tinh, val_tinh) {
                        $("#tinh").append('<option value="' + val_tinh.id + '">' + val_tinh.full_name + '</option>');
                    });
                }
            });

            // Khi chọn tỉnh
            $("#tinh").change(function () {
                var idtinh = $(this).val();
                $("#quan").html('<option value="0">Quận Huyện</option>');
                $("#phuong").html('<option value="0">Phường Xã</option>');
                if (idtinh != "0") {
                    $.getJSON('https://esgoo.net/api-tinhthanh/2/' + idtinh + '.htm', function (data_quan) {
                        if (data_quan.error == 0) {
                            $.each(data_quan.data, function (key_quan, val_quan) {
                                $("#quan").append('<option value="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                            });
                        }
                    });
                }
            });

            // Khi chọn quận
            $("#quan").change(function () {
                var idquan = $(this).val();
                $("#phuong").html('<option value="0">Phường Xã</option>');
                if (idquan != "0") {
                    $.getJSON('https://esgoo.net/api-tinhthanh/3/' + idquan + '.htm', function (data_phuong) {
                        if (data_phuong.error == 0) {
                            $.each(data_phuong.data, function (key_phuong, val_phuong) {
                                $("#phuong").append('<option value="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');
                            });
                        }
                    });
                }
            });
        });
    </script>
}
