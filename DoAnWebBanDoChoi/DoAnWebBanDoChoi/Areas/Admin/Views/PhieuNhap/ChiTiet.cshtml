@model PhieuNhap

<div class="container-fluid pt-4 px-4">
    <div class="bg-white rounded shadow p-4 border">

                <h2>Chi tiết phiếu nhập #@Model.MaPn</h2>
                <p><strong>Ngày nhập:</strong> @Model.NgayNhap.ToString("dd/MM/yyyy HH:mm")</p>
                <p><strong>Nhà cung cấp:</strong> @Model.MaNccNavigation.TenNhaCungCap</p>
                <p><strong>Trạng thái:</strong> @(Model.TrangThai == 1 ? "Đã duyệt" : "Chờ duyệt")</p>

                @if (Model.TrangThai == 1)
                {
                    <button class="btn btn-secondary mb-3" disabled>✔️ Đã xác nhận</button>
                }
                else
                {
                    <a class="btn btn-primary mb-3" asp-action="ThemChiTiet" asp-route-id="@Model.MaPn">➕ Thêm sản phẩm</a>
                    <form asp-action="XacNhanPhieuNhap" method="post" class="d-inline">
                        <input type="hidden" name="id" value="@Model.MaPn" />
                        <button type="submit" class="btn btn-success mb-3">✔️ Xác nhận phiếu nhập</button>
                    </form>
                }


                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Sản phẩm</th>
                            <th>Số lượng</th>
                            <th>Giá nhập</th>
                            <th>Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var ct in Model.ChiTietPhieuNhaps)
                        {
                            <tr>
                                <td>@ct.MaSpNavigation.TenSanPham</td>
                                <td>@ct.SoLuong</td>
                                <td>@ct.GiaNhap.ToString("N0")</td>
                        <td>**@((ct.GiaNhap * ct.SoLuong).ToString("N0"))**</td>
                            </tr>
                        }
                    </tbody>
                </table>

    </div>
</div>
